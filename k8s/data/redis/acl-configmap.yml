apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-acl-config
  namespace: data
data:
  init-acl.lua: |
    -- Redis ACL initialization script
    -- This script creates the saferoute user with ACL permissions
    redis.call('ACL', 'SETUSER', 'saferoute', 'on', '>LB04@Redis', '~*', '&*', '+@all')
    return redis.call('ACL', 'GETUSER', 'saferoute')
  users.acl: |
    user saferoute on >LB04@Redis ~* &* +@all

